---
title: JS ä¸­çš„äºŒè¿›åˆ¶ï¼Œä¸ä»…ä»…äºJS
date: 2023/4/26
description: è®²è¿°å…³äºäºŒè¿›åˆ¶çš„åŸºç¡€çŸ¥è¯†ã€ç¼–ç å’Œ JS ä¸­äºŒè¿›åˆ¶çš„ç›¸å…³ APIã€ä½è¿ç®—ã€‚
tag: js,binary,encode
author: eddie
---

# JS ä¸­çš„äºŒè¿›åˆ¶ï¼Œä¸ä»…ä»…äºJS

![](/images/post/js-binary/index.png)

![](/images/post/js-binary/list.png)

## è¿›åˆ¶æ•°çš„è¡¨ç¤º

  


### è¿›åˆ¶æ•°å­—é¢é‡

-   äºŒè¿›åˆ¶ 0b æˆ– 0B å‰ç¼€ï¼Œå¦‚ 0b11 === 3
-   å…«è¿›åˆ¶ 0o æˆ– 0O å‰ç¼€ï¼Œå¦‚ 0o11 === 9
-   åå…­è¿›åˆ¶ 0x æˆ– 0X å‰ç¼€ï¼Œå¦‚ 0x11 === 17



### äºŒè¿›åˆ¶æ•°çš„è¡¨ç¤ºæ³•

ä»¥å…«ä¸ªäºŒè¿›åˆ¶ä½çš„ä¸¾ä¾‹ã€‚

#### åŸç 

ç¬¬ 1 ä½è¡¨ç¤º**ç¬¦å·ä½**ï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ã€‚å 7 ä½è¡¨ç¤º**çœŸå€¼**ã€‚

```
0000 0010 // 2 åŸç 
1000 0010 // -2 åŸç 
```

#### åç 

å¯¹äºæ­£æ•°ï¼šæ˜¯å…¶åŸç æœ¬èº«ä¸å˜ã€‚

å¯¹äºè´Ÿæ•°ï¼šç¬¦å·ä½ä¸å˜ï¼Œå 7 ä½çš„çœŸå€¼æŒ‰ä½å–åã€‚

```
0000 0010 // 2 åŸç 
0000 0010 // 2 åç 

1000 0010 // -2 åŸç 
1111 1101 // -2 åç 
```

#### è¡¥ç 

å¯¹äºæ­£æ•°ï¼šæ˜¯å…¶åŸç æœ¬èº«ä¸å˜ã€‚

å¯¹äºè´Ÿæ•°ï¼šåœ¨åŸç çš„åŸºç¡€ä¸Šï¼Œå–å…¶åç ï¼Œå†åŠ  1ã€‚

```
0000 0010 // 2 åŸç 
0000 0010 // 2 åç 
0000 0010 // 2 è¡¥ç 

1000 0010 // -2 åŸç 
1111 1101 // -2 åç 
1111 1110 // -2 è¡¥ç 
```

ä»¥ä¸Šç»“è®ºå°±æ˜¯ï¼Œæ­£æ•°çš„è¡¨ç¤ºæ³•éƒ½ä¸€æ ·ï¼Œè´Ÿæ•°åˆ™ä¸åŒã€‚

  


#### **ä¸ºä»€ä¹ˆä¼šæœ‰åç ã€è¡¥ç çš„å­˜åœ¨ï¼Ÿ**

ä¸ºäº†å‡å°‘è®¡ç®—æœºè¿ç®—é€»è¾‘çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥å°†ç¬¦å·ä½ä¹ŸåŠ å…¥è¿ç®—ï¼Œè¡¥ç çš„è¡¨ç¤ºå¯ä»¥åšåˆ°åªç”¨åŠ æ³•å°±è¿›è¡ŒåŠ å‡æ³•çš„è¿ç®—ã€‚

```
// 1 + 2 è¡¥ç è¿ç®—
0000 0001 + 0000 0010 = 0000 0011
0000 0011(è¡¥ç ) = 0000 0011(åç ) = 0000 0011(åŸç ) = 3

// 1 + (-2) è¡¥ç è¿ç®—
0000 0001 + 1111 1110 = 1111 1111
1111 1111(è¡¥ç ) = 1111 1110(åç ) = 1000 0001(åŸç ) = -1
```

  


### è¿›åˆ¶è½¬æ¢

#### åè¿›åˆ¶è½¬å…¶ä»–è¿›åˆ¶

**toString**

```ts
6..toString(2) // '110'
9..toString(8) // '11'
```

#### å…¶ä»–è¿›åˆ¶åè¿›åˆ¶è½¬

**parseInt**

```ts
parseInt('110', 2) // 6
parseInt('11', 8) // 9
```

**Number**

```ts
Number('0b110') // 6
Number('0o11') // 9
```

**+ï¼ˆä¸€å…ƒè¿ç®—ç¬¦ï¼‰**

```ts
+'0b110' // 6
+'0o11' // 9
```

  


  


## äºŒè¿›åˆ¶çš„ä½è¿ç®—

> ä½è¿ç®—ç¬¦å°†å®ƒçš„æ“ä½œæ•°è§†ä¸º 32 ä½å…ƒçš„äºŒè¿›åˆ¶ä¸²æ•°ã€‚ ä½è¿ç®—ç¬¦åœ¨æ­¤è¡¨ç¤ºä¸Šæ‰§è¡Œè¿ç®—ã€‚JavaScript æ•°å€¼ã€‚

  


### JS ä½è¿ç®—ç¬¦

#### æŒ‰ä½ä¸ï¼ˆ&ï¼‰

> a & bï¼šåœ¨ aï¼Œb çš„ä½è¡¨ç¤ºä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹åº”çš„ä½éƒ½ä¸º 1 åˆ™è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚

```
// 2 & 6 = 2
010
110
---
010
```

å¦™ç”¨ï¼š
-   åˆ¤æ–­å¥‡å¶ n&1

#### æŒ‰ä½æˆ–ï¼ˆ|ï¼‰

> a | bï¼šåœ¨ aï¼Œb çš„ä½è¡¨ç¤ºä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹åº”çš„ä½ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸º 1 åˆ™è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚

```
// 2 | 6 = 6
010
110
---
110
```

#### æŒ‰ä½å¼‚æˆ–ï¼ˆ^ï¼‰

> a ^ bï¼šåœ¨ aï¼Œb çš„ä½è¡¨ç¤ºä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹åº”çš„ä½ï¼Œä¸ç›¸åŒåˆ™è¿”å› 1ï¼Œç›¸åŒåˆ™è¿”å› 0ã€‚

```
// 2 ^ 6 = 4
010
110
---
100
```

å¦™ç”¨ï¼š
-   äº¤æ¢æ•°å€¼ diff = a^bï¼› b = a^diff; a = b^diff

#### æŒ‰ä½éï¼ˆï½ï¼‰

> ï½aï¼šåè½¬è¢«æ“ä½œæ•°çš„ä½

```
// ~6 = -7
0000 0110
---
1111 1001 // åè½¬å = è¡¥ç 
1111 1000 // åç 
1000 0111 // åŸç 
```

å¦™ç”¨ï¼š
-   ï½ï½value å–æ•´æ•°ï¼Œæ¯” parseIntï¼ˆvalueï¼‰æ•ˆç‡æ›´é«˜

#### å·¦ç§»ï¼ˆ\<\<ï¼‰

> a \<\< bï¼šå°† a çš„äºŒè¿›åˆ¶ä¸²å‘å·¦ç§»åŠ¨ b ä½ï¼Œå³è¾¹ç§»å…¥ 0

```
// 6 << 2 = 24
0000 0110
---
0001 1000

// -6 << 2 = -24
1000 0110
---
1001 1000
```

å¦™ç”¨ï¼š
-   a \<\< n = a * 2^n

#### ç®—æœ¯å³ç§»ï¼ˆ\>\>ï¼‰

> a \>\> bï¼šæŠŠ a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§»åŠ¨ b ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„æ‰€æœ‰ä½

```
// 6 >> 2 = 1
0000 0110
---
0000 0001

// -6 >> 2 = -2
1000 0110 // åŸç 
1111 1001 // åç 
1111 1010 // è¡¥ç 
1111 1110 // å³ç§»2ä½
1111 1101 // å³ç§»ååç 
---
1000 0010 // ç§»ä½ååŸç 
```

å¦™ç”¨ï¼š
-   a \>\> n = a / 2^n ï¼ˆa ä¸ºæ­£æ•°ï¼‰
-   a \>\> n = ï¼ˆa + 2^32ï¼‰ / 2^n ï¼ˆa ä¸ºè´Ÿæ•°ï¼‰

#### æ— ç¬¦å·å³ç§»ï¼ˆ\>\>\>ï¼‰

> a \>\>\> bï¼šæŠŠ a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§»åŠ¨ b ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„æ‰€æœ‰ä½ï¼Œå¹¶æŠŠå·¦è¾¹ç©ºå‡ºçš„ä½éƒ½å¡«å……ä¸º 0

```
// 6 >>> 2 = 1
0000 0110
---
0000 0001

// -6 >>> 2 = 1073741822
10000000 00000000 00000000 00000110 // 32ä½åŸç 
11111111 11111111 11111111 11111001 // åç 
11111111 11111111 11111111 11111010 // è¡¥ç 
00111111 11111111 11111111 11111110 // ç§»ä½
---
00111111 11111111 11111111 11111110 // ç§»ä½ååŸç 
```

  


### ä½è¿ç®—æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ

> ä½è¿ç®—èƒ½å¤Ÿé«˜æ•ˆç‡çš„å®Œæˆæ•°å€¼çš„è®¡ç®—ã€‚
>
> å› ä¸ºæœºå™¨æœ€ç»ˆæ˜¯è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å»è¿ç®—ï¼Œä½è¿ç®—è¿‡ç¨‹åˆ™æ›´ä¸ºç›´æ¥ã€‚åº•å±‚ä½¿ç”¨è¡¥ç è¿ç®—åŠ æ³•å’Œç§»ä½ï¼Œå®ç°ä¸ä»…ä»…åŠ æ³•çš„å…¶ä»–è¿ç®—ï¼ˆå‡ä¹˜é™¤æ¨¡æ³•ç­‰ï¼‰ã€‚

ğŸ’¡**è™½ç„¶ä½è¿ç®—å¦™ç”¨æ›´ç®€æ´æ›´é«˜æ•ˆï¼Œä½†æ˜¯ä¸å»ºè®®åœ¨ä¸šåŠ¡ä»£ç ä¸­ç»„åˆä½¿ç”¨ï¼Œä¼šå½±å“å¯è¯»æ€§ã€‚ä½è¿ç®—æ›´é€‚åˆç”¨åœ¨ä¸€äº›æ€§èƒ½è¦æ±‚é«˜çš„åº•å±‚é€»è¾‘ä»£ç ã€‚**

  


  


## äºŒè¿›åˆ¶ç¼“å†²åŒº

![](/images/post/js-binary/arraybuffer.png)


### ArrayBuffer

å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ã€‚ä¸èƒ½ç›´æ¥æ“ä½œï¼Œåªèƒ½é€šè¿‡ç±»å‹è§†å›¾ï¼ˆDataViewã€TypedArrayï¼‰æ“ä½œã€‚

æ„é€ å‡½æ•°ä¼ å‚ä¸€ä¸ªé•¿åº¦ï¼Œåˆ›å»ºä»¥å­—èŠ‚ï¼ˆ8 ä½ï¼‰ä¸ºå•ä½çš„æ•°ç»„ã€‚

```ts
// 8ä½ * 16å­—èŠ‚ = 128ä½
const buffer = new ArrayBuffer(16);

// 128ä½ / 8ä½ = é•¿åº¦16
const i8 = new Int8Array(buffer)
console.log(i8.length) // 16

// 128ä½ / 32ä½ = é•¿åº¦4
const i32 = new Int32Array(buffer)
console.log(i32.length) // 4
```

  


### TypedArray

ä½œä¸º ArrayBuffer ç±»å‹åŒ–çš„è§†å›¾ï¼Œæä¾›æ–¹ä¾¿åœ°è¯»å†™äºŒè¿›åˆ¶æ•°æ®çš„æ“ä½œã€‚[TypedArray - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray#typedarray_%E5%AF%B9%E8%B1%A1)

åˆå§‹åŒ–æ¥æ”¶ å›ºå®šé•¿åº¦æˆ–åŸå§‹ buffer æ•°ç»„ï¼Œä»¥å¯¹åº”çš„ç±»å‹æ•°ç»„çš„è®¾ç½®èŒƒå›´å†…å†™å…¥å’Œè¯»å–ã€‚

#### Uint8Array

æ•°ç»„æ¯ä¸ªå…ƒç´ å¤§å°ä¸ºä¸€ä¸ªå­—èŠ‚ï¼Œå€¼èŒƒå›´ 0 åˆ° 255ï¼Œæ— ç¬¦å·çš„æ•´å‹ï¼ˆæ­£æ•´æ•°ï¼‰

```ts
const u8 = new Uint8Array(6)
u8[0] = 100
u8[1] = 300
console.log(u8[0]) // 100
console.log(u8[1]) // ?ï¼ˆè¶Šç•Œèµ‹å€¼ä¼šæ€ä¹ˆæ ·ï¼‰

// è§£æï¼š
```

  


### DataView

æ˜¯ä¸€ä¸ªå¯ä»¥ä» ArrayBuffer å¯¹è±¡ä¸­è¯»å†™å¤šç§æ•°å€¼ç±»å‹çš„åº•å±‚æ¥å£è§†å›¾ã€‚ [DataView - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DataView)

```ts
const buffer = new ArrayBuffer(32)
const dv = new DataView(buffer)

dv.setInt8(0, 100)
dv.setInt16(1, 200)

console.log(
    dv.getInt8(0),  // 100w
    dv.getInt16(0), // ?ï¼ˆInt16 å– Int8ï¼‰
    dv.getInt8(1),  // 0
    dv.getInt16(1), // 200
)

// è§£æï¼š
```

  


  


## äºŒè¿›åˆ¶ç¼–ç 

  


### ç¼–ç ç±»å‹

-   **ASCII**

> æ˜¯ä¸€ç§åŸºäºæ‹‰ä¸å­—æ¯çš„å­—ç¬¦ç¼–ç æ ‡å‡†ï¼Œç”¨äºç”µå­é€šä¿¡ã€‚å®ƒæœ€åˆæ˜¯ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼Œä½¿ç”¨ 7 ä½äºŒè¿›åˆ¶æ•°æ¥è¡¨ç¤º 128 ä¸ªå­—ç¬¦ã€‚ [ASCII-wiki](https://zh.wikipedia.org/wiki/ASCII)

ç‰¹å¾ï¼šä»…è¡¨ç¤ºè‹±æ–‡åŠå…¶ç¬¦å·ï¼›ä¸€ä¸ªå­—ç¬¦å ç”¨äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯å®é™…ç”¨äº† 7 ä½ï¼Œç¬¬ä¸€ä½å§‹ç»ˆåœ¨ä¸º 0ã€‚

-   **Unicode**

> æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ï¼ŒåŒ…æ‹¬å­—ç¬¦é›†ã€ç¼–ç æ–¹æ¡ˆç­‰ã€‚Unicode ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå¯ä»¥è¡¨ç¤ºå‡ ä¹æ‰€æœ‰çš„è¯­è¨€æ–‡å­—ã€‚

ç‰¹å¾ï¼šæ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼›UCS-2ï¼ˆunicode çš„æ ‡å‡†å®ç°ï¼‰å ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œä½†æœ‰ä¸€äº›å­—ç¬¦å®é™…åªä½¿ç”¨äº†ä¸€ä¸ªå­—èŠ‚ã€‚

[SYMBL - Unicode æŸ¥è¯¢](https://symbl.cc/cn/)

-   **UTF-8**

> æ˜¯ä¸€ç§é’ˆå¯¹ Unicode çš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ã€‚å®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ï¼ŒèŠ‚çœäº†å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿæ–¹ä¾¿äº†ä¼ è¾“ã€‚

![](/images/post/js-binary/unicode.png)

-   **Base64**

> æ˜¯ä¸€ç§ç”¨äºä¼ è¾“äºŒè¿›åˆ¶æ•°æ®çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥å°†ä»»æ„äºŒè¿›åˆ¶æ•°æ®ç¼–ç æˆå¯æ‰“å°å­—ç¬¦ï¼Œä¾¿äºä¼ è¾“å’Œå¤„ç†ã€‚

base64 è¦æ±‚å°†æ¯ä¸‰ä¸ª 8bits å­—èŠ‚è½¬æ¢ä¸ºå››ä¸ª 6bit çš„å­—èŠ‚ï¼Œå†æ ¹æ®è¿™ 4 ä¸ª 8bit å­—èŠ‚çš„åè¿›åˆ¶åœ¨ç´¢å¼•è¡¨ä¸­æŸ¥æ‰¾å¯¹åº”çš„å€¼ã€‚

![](/images/post/js-binary/base64.png)

[The Base64 algorithm description](https://fm4dd.com/programming/base64/base64_algorithm.shtm)

  


### JS çš„å­—ç¬¦ç¼–ç æ–¹æ³•

**charCodeAt ä¸ fromCharCode**

charCodeAt è¿”å›ä¸€ä¸ªå­—ç¬¦çš„ **unicode** ç¼–ç ï¼ˆä¸ ASCII é‡åˆçš„å­—ç¬¦åˆ™ä¸€è‡´ï¼‰ã€‚

fromCharCode è¿”å› unicode ç¼–ç å¯¹åº”çš„å­—ç¬¦ã€‚

```ts
const char = 'ç¼–ç '
const charcode = [char.charCodeAt(0), char.charCodeAt(1)]

console.log(charcode)
// [32534, 30721]
console.log(String.fromCharCode(...charcode))
// 'ç¼–ç '
```

**TextEncoder ä¸ TextDecoder**

TextEncoder æŠŠå­—ç¬¦è½¬ä¸º **UTF-8** çš„å­—èŠ‚æµã€‚

TextDecoder åˆ™è§£ç å¯¹åº”çš„å­—èŠ‚æµä¸ºå­—ç¬¦ã€‚

```ts
const encoder = new TextEncoder()
const view = encoder.encode('ç¼–ç ')
console.log(view)
// [231, 188, 150, 231, 160, 129]

const decoder = new TextDecoder()
const chars = decoder.decode(view)
console.log(chars)
// 'ç¼–ç '

const u8 = new Uint8Array(3)
encoder.encodeInto('ç¼–ç ', u8)
console.log(u8) // [231, 188, 150]
console.log(
    decoder.decode(u8), // 'ç¼–'
)
```

**atob ä¸ atob**

btoa å°†å­—ç¬¦ä¸²ç¼–ç ä¸º **base64**ï¼ˆä»…æ”¯æŒ ascii å­—ç¬¦ï¼Œä¸æ”¯æŒå…¶ä»–å¦‚ä¸­æ–‡ï¼‰ã€‚

atob è§£ç  base64 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚

```ts
const charsEn = 'base64'
const base64En = btoa(charsEn)
console.log(base64En) // 'YmFzZTY0'
console.log(atob(base64En)) // 'base64'

const charsZh = 'ç¼–ç '
const base64Zh = btoa(encodeURIComponent(charsZh))
console.log(base64Zh) // 'JUU3JUJDJTk2JUU3JUEwJTgx'
console.log(
    decodeURIComponent(atob(base64Zh)), // 'ç¼–ç '
)
```

  


## äºŒè¿›åˆ¶çš„åº”ç”¨

  


### ä¸Šä¼ ä¸‹è½½

Ajaxã€Fetch å’Œ WebSocket æ¥æ”¶å’Œä¸Šä¼  arraybuffer äºŒè¿›åˆ¶æ•°ç»„

### å›¾åƒã€è§†é¢‘éŸ³é¢‘å¤„ç†

canvalã€webGLã€blob ç­‰

### åè®®

å¦‚ protobuf ç­‰

  
## Links

- [js-binary demo](https://minimal-realization.vercel.app/#/js-binary)

## å‚è€ƒæ–‡ç« 

- [åŸç ï¼Œ åç ï¼Œ è¡¥ç  è¯¦è§£ - ziqiu.zhang - åšå®¢å›­](https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/computercode.html)
- [èŠèŠ JavaScript ä¸­çš„äºŒè¿›åˆ¶æ•°](https://yanhaijing.com/javascript/2016/07/20/binary-in-js/)
- [ã€javaScriptã€‘Javascript ä¸­çš„ ä½è¿ç®—ç¬¦ + ä½¿ç”¨åœºæ™¯ + æ€§èƒ½å¯¹æ¯” + å°è£…_@Umbrella çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/Umbrella_Um/article/details/102874300)`
